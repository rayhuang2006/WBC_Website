<link rel="stylesheet" href="{{ url_for('static', filename='css/pool.css') }}">
{% extends "base.html" %}

{% block content %}
<header>
    <h2>WBC 戰力分析儀表板 - {{ pool_name }}</h2>
    <a href="/" class="back-link">&larr; 返回 (L1) 世界總覽</a>
</header>

<main>
    <section class="chart-container">
        <h2>戰力雷達圖 (多維度比較)</h2>
        <p>比較本組隊伍在打擊、投手、防守等面向的綜合戰力。</p>
        <div id="radarPlot" class="plotly-chart"></div>
    </section>

    <section class="chart-container">
        <h2>關鍵數據 (團隊 OPS / ERA)</h2>
        <div id="barPlot" class="plotly-chart"></div>
    </section>

    <section class="team-list-container">
        <h2>分組隊伍 (點擊查看 L3 球員名單)</h2>
        <div class="team-grid">
            {% for team in team_list %}
            <a href="/team/{{ team.name }}" class="team-card">
                <img src="{{ url_for('static', filename='flags/' + team.iso_code + '.png') }}" alt="{{ team.name }}">
                <span>{{ team.name }}</span>
            </a>
            {% endfor %}
        </div>
    </section>
</main>

<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

<script src="{{ url_for('static', filename='js/pool.js') }}"></script>

<script>
    // 等待網頁載入完成後再執行 (這是好習慣)
    document.addEventListener('DOMContentLoaded', function () {

        // 從 Flask 傳來的資料
        const flaskData = {{ teams | tojson }};
        
        // 繪製雷達圖
        drawRadarChart(flaskData);

        // 繪製長條圖
        drawBarChart(flaskData);
        
    });
</script>

{% endblock %}